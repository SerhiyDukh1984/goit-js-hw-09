{"mappings":"AAAA,MAAMA,EAASC,SAASC,cAAc,QAChCC,EAAeH,EAAOI,SAASC,MAC/BC,EAASN,EAAOI,SAASG,KACzBC,EAAWR,EAAOI,SAASK,OAC3BC,EAAWT,SAASC,cAAc,UAExCF,EAAOW,iBAAiB,UAIxB,SAAuBC,GACrBF,EAASG,UAAW,EACpBD,EAAEE,iBACF,IAAIT,EAAQU,OAAOZ,EAAaa,OAEhC,IAAK,IAAIC,EAAI,EAAGA,GAAKT,EAASQ,MAAOC,GAAK,EACxCC,SAAWD,EACXE,EAAcD,SAAUb,GAAOe,KAAKC,SAASC,MAAMC,QACnDlB,GAASU,OAAOT,EAAOU,UAV3B,IAAIQ,EAAU,EAmBd,SAASL,EAAcD,EAAUb,GAC/B,OAAO,IAAIoB,SAAQ,CAACJ,EAASE,KAC3BG,UAAYC,YAAW,KACrB,GAAIH,EAAUhB,EAGZ,OAFAoB,aAAaF,gBACbhB,EAASG,UAAW,GAGtB,MAAMgB,EAAgBC,KAAKC,SAAW,GAGtC,OADAP,EAAU,EACNK,GACFR,EAAQ,uBAAqBH,QAAiBb,OACvC,C,SAAEa,E,MAAUb,KAEnBkB,EAAO,sBAAoBL,QAAeb,OACnC,C,SAAEa,E,MAAUb,MAEpBA","sources":["src/js/03-promises.js"],"sourcesContent":["const formEl = document.querySelector('form');\nconst firstDelayEl = formEl.elements.delay;\nconst stepEl = formEl.elements.step;\nconst amountEl = formEl.elements.amount;\nconst buttonEl = document.querySelector('button');\n\nformEl.addEventListener('submit', onSubmitClick);\n\nlet counter = 0;\n\nfunction onSubmitClick(e) {\n  buttonEl.disabled = true;\n  e.preventDefault();\n  let delay = Number(firstDelayEl.value);\n\n  for (let i = 1; i <= amountEl.value; i += 1) {\n    position = i;\n    createPromise(position, delay).then(resolve).catch(reject);\n    delay += Number(stepEl.value);\n  }\n}\n\nfunction onSuccess({ position, delay }) {}\nfunction onError({ position, delay }) {\n  console.log();\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    timeoutId = setTimeout(() => {\n      if (counter > amountEl) {\n        clearTimeout(timeoutId);\n        buttonEl.disabled = false;\n        return;\n      }\n      const shouldResolve = Math.random() > 0.3;\n\n      counter = +1;\n      if (shouldResolve) {\n        resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n        return { position, delay };\n      } else {\n        reject(`❌ Rejected promise ${position} in ${delay}ms`);\n        return { position, delay };\n      }\n    }, delay);\n  });\n}\n"],"names":["$47d4ff9957288465$var$formEl","document","querySelector","$47d4ff9957288465$var$firstDelayEl","elements","delay","$47d4ff9957288465$var$stepEl","step","$47d4ff9957288465$var$amountEl","amount","$47d4ff9957288465$var$buttonEl","addEventListener","e","disabled","preventDefault","Number","value","i","position","$47d4ff9957288465$var$createPromise","then","resolve","catch","reject","$47d4ff9957288465$var$counter","Promise","timeoutId","setTimeout","clearTimeout","shouldResolve","Math","random"],"version":3,"file":"03-promises.55f5f3ab.js.map"}