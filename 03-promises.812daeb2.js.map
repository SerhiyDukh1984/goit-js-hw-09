{"mappings":"YAAA,IAAMA,EAASC,SAASC,cAAc,QAChCC,EAAeH,EAAOI,SAASC,MAC/BC,EAASN,EAAOI,SAASG,KACzBC,EAAWR,EAAOI,SAASK,OAC3BC,EAAWT,SAASC,cAAc,UAExCF,EAAOW,iBAAiB,UAIxB,SAAuBC,GACrBF,EAASG,UAAW,EACpBD,EAAEE,iBAGF,IAFA,IAAIT,EAAQU,OAAOZ,EAAaa,OAEvBC,EAAI,EAAGA,GAAKT,EAASQ,MAAOC,GAAK,EACxCC,SAAWD,EACXE,EAAcD,SAAUb,GAAOe,KAAKC,SAASC,MAAMC,QACnDlB,GAASU,OAAOT,EAAOU,UAV3B,IAAIQ,EAAU,EAmBd,SAASL,EAAcD,EAAUb,GAC/B,OAAO,IAAIoB,SAAQ,SAACJ,EAASE,GAC3BG,UAAYC,YAAW,WACrB,GAAIH,EAAUhB,EAGZ,OAFAoB,aAAaF,gBACbhB,EAASG,UAAW,GAGtB,IAAMgB,EAAgBC,KAAKC,SAAW,GAGtC,OADAP,EAAU,EACNK,GACFR,EAAQ,uBAAwCW,OAAfd,EAAS,QAAYc,OAAN3B,EAAM,OAC/C,CAAEa,WAAUb,WAEnBkB,EAAO,sBAAqCS,OAAfd,EAAS,QAAYc,OAAN3B,EAAM,OAC3C,CAAEa,WAAUb,YAEpBA,O","sources":["src/js/03-promises.js"],"sourcesContent":["const formEl = document.querySelector('form');\nconst firstDelayEl = formEl.elements.delay;\nconst stepEl = formEl.elements.step;\nconst amountEl = formEl.elements.amount;\nconst buttonEl = document.querySelector('button');\n\nformEl.addEventListener('submit', onSubmitClick);\n\nlet counter = 0;\n\nfunction onSubmitClick(e) {\n  buttonEl.disabled = true;\n  e.preventDefault();\n  let delay = Number(firstDelayEl.value);\n\n  for (let i = 1; i <= amountEl.value; i += 1) {\n    position = i;\n    createPromise(position, delay).then(resolve).catch(reject);\n    delay += Number(stepEl.value);\n  }\n}\n\nfunction onSuccess({ position, delay }) {}\nfunction onError({ position, delay }) {\n  console.log();\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    timeoutId = setTimeout(() => {\n      if (counter > amountEl) {\n        clearTimeout(timeoutId);\n        buttonEl.disabled = false;\n        return;\n      }\n      const shouldResolve = Math.random() > 0.3;\n\n      counter = +1;\n      if (shouldResolve) {\n        resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n        return { position, delay };\n      } else {\n        reject(`❌ Rejected promise ${position} in ${delay}ms`);\n        return { position, delay };\n      }\n    }, delay);\n  });\n}\n"],"names":["$ce04d3a99e08e73b$var$formEl","document","querySelector","$ce04d3a99e08e73b$var$firstDelayEl","elements","delay","$ce04d3a99e08e73b$var$stepEl","step","$ce04d3a99e08e73b$var$amountEl","amount","$ce04d3a99e08e73b$var$buttonEl","addEventListener","e","disabled","preventDefault","Number","value","i","position","$ce04d3a99e08e73b$var$createPromise","then","resolve","catch","reject","$ce04d3a99e08e73b$var$counter","Promise","timeoutId","setTimeout","clearTimeout","shouldResolve","Math","random","concat"],"version":3,"file":"03-promises.812daeb2.js.map"}